// Project data
const projectData = {
    project1: {
        title: 'FrogHire.ai',
        subtitle: 'Chrome extension for international job seekers (OPT/CPT/H-1B)',
        role: 'UX/UI Designer',
        timeline: 'October 2024 ‚Äì Present',
        tools: 'Figma, Adobe Creative Suite, HTML, CSS, Google Analytics',
        overview: {
            title: 'Project Overview',
            content: `
                FrogHire.ai is a job-search tool built for international students and professionals pursuing work in the U.S. under strict visa conditions. With a growing user base and a promising dataset, the product offered real utility‚Äîbut lacked the design infrastructure to support its long-term vision.
                <br><br>
                My role was to lead a strategic UX overhaul that could match the product's ambition with usability. This meant rethinking not just how the platform looked, but how it <strong>guided, informed, and adapted to complex user needs</strong>.
                <br><br>
                <strong>This project spanned:</strong>
                <ul>
                    <li>A complete redesign of the user interface and interaction model</li>
                    <li>The introduction of a persistent sidebar to replace a fragile floating UI</li>
                    <li>Systematic testing, visual refinements, and the design of scalable components to support future growth</li>
                    <li>Working closely with both the product and engineering teams, I helped evolve FrogHire from a niche tool into a credible, user-first platform capable of scaling with user demand and functionality.</li>
                </ul>`
        },
        background: {
            title: 'Background & Context',
            content: 'FrogHire.ai is a browser extension and curated job dataset that empowers international students and visa-dependent professionals (OPT/CPT/H-1B) in the U.S. job market. It integrates with job boards like LinkedIn, Indeed, and Glassdoor, surfacing visa-sponsored opportunities through smart filters and real-time overlays.<br><br>I joined as the sole UX/UI Designer to lead a full redesign‚Äîapplying my skills in <strong>Figma prototyping, Google Analytics, user interviews, and Adobe Creative Suite</strong> to transform the product into a user-first, scalable platform. I replaced the outdated floating UI with a persistent sidebar, introduced accessibility-minded design patterns, and established a visual system ready for growth.'
        },
        planning: {
            title: 'Planning & Strategy',
            content: [
                '<strong>User Research:</strong> Conducted 30+ remote interviews and screen shares to identify confusion points, feature blind spots, and emotional triggers in the job search process.',
                '<strong>Analytics Review:</strong> Analyze users\' behavior via Google Analytics to flag drop-off patterns and underutilized tools.',
                '<strong>Design Audit:</strong> Identifying UX inconsistencies, scaling limitations, and accessibility gaps across screens.',
            ],
            images: [
                './assets/project/project1/planning1.png',
                './assets/project/project1/planning2.png'
            ]
        },
        execution: {
            title: 'Execution',
            content: [
                '<strong>Sidebar Redesign:</strong> Replaced the legacy floating modal. This new UI anchors search strategy, streamlines filter inputs, and supports feature growth‚Äîwhile dramatically improving visibility and control.',
                '<strong>Prototyping:</strong> Created 100+ iterative Figma prototypes tested with real users, focusing on strategy configuration, job discovery, and employer filtering.',
                '<strong>A/B Testing:</strong> Ran layout and component tests that resulted in a 23% increase in UX efficiency across primary user flows.',
                '<strong>Visual & Brand Assets:</strong> Designed over 15 scalable brand elements and UI illustrations using Adobe tools, supporting a cohesive product relaunch.'
            ]
        },
        challenges: {
            title: 'Challenges & Solutions',
            content: [
                `<p><strong>Low Feature Awareness</strong> Many users missed core features like E-Verify/H1B filtering and the contact sidebar.</p>
                <p><strong>üõ† Solution:</strong> Integrated visual onboarding cues, status indicators, and in-context tooltips to surface critical functionality.</p>`,
                `<p><strong>Navigation Friction</strong> The floating window UI created context loss and was difficult to use alongside multiple job boards.</p>
                <p><strong>üõ† Solution:</strong> Introduced a fixed sidebar that kept strategy controls persistently visible while offering better spatial hierarchy and fewer clicks.</p>`,
                `<p><strong>Platform Compatibility Confusion</strong> Users didn't know which job boards were supported or why results varied.</p>
                <p><strong>üõ† Solution:</strong> I designed compatibility indicators and clear platform icons alongside filters, improving transparency and trust.</p>`
            ],
            images: [
                './assets/project/project1/challenges1.jpg',
                './assets/project/project1/challenges2.jpg'
            ]
        },
        outcomes: {
            title: 'Outcomes & Impact',
            content: [
                'üöÄ +10,000 new users acquired in 5 months',
                'üìä 23% improvement in user satisfaction scores (via post-session surveys and analytic benchmarks)',
                'üé® Successful relaunch with unified branding and streamlined experience across the Chrome extension and web platform'
            ],
            images: [
                './assets/project/project1/mp4/H-1B history.mp4',
                './assets/project/project1/mp4/Job Screener.mp4'
            ]
        },
        reflection: {
            title: 'Reflection',
            content: `This project deepened my ability to translate qualitative feedback and usage data into intuitive product systems. I learned that meaningful UX isn't just about clean layouts‚Äîit's about designing trust, reducing ambiguity, and aligning with the emotional stakes of real users. FrogHire became more than a filter‚Äîit became a guide.`
        },
        images: [
            './assets/project/project1/Extension1.mp4',
            './assets/project/project1/Extension2.mp4',
        ],
        visualDesign: {
            title: 'Visual Design',
            images: [
                './assets/project/project1/Visual Design/color.png',
                './assets/project/project1/Visual Design/Newsletter Banner.png',
                './assets/project/project1/Visual Design/Monthly Keywords Poster.png',
                './assets/project/project1/Visual Design/BusinessCard Front.png',
                './assets/project/project1/Visual Design/BusinessCard Back.png',
                './assets/project/project1/Visual Design/FrogHire Meeting Background V2.png',
                './assets/project/project1/Visual Design/Small promo tile.png',
                './assets/project/project1/Visual Design/2 Step Guide.png'
            ]
        }
    },
    project2: {
        title: 'Aloega',
        subtitle: 'A Web3 healthcare ecosystem empowering secure health data sharing through blockchain technology.',
        role: 'Marketing Intern',
        timeline: 'June 2024 - October 2024',
        tools: 'Press Release, Social Media, Content Creation, Copywriting',
        overview: {
            title: 'Project Overview',
            content: `
                Aloega is a Web3 healthcare ecosystem focused on empowering individuals to securely share their health data through a "share-to-earn" model, built on blockchain. Its mission is to decentralize access to health data, support cutting-edge research, and offer data contributors both privacy and rewards.
                <br><br>
                As a Marketing Intern, I supported Aloega\'s public-facing communications and brand narrative by rewriting technical messaging, refining the platform\'s voice, and creating multilingual, multi-platform content that speaks to both Web3 natives and healthcare audiences.
                <br><br>
                <strong>This project spanned:</strong>
                <ul>
                    <li>Message repositioning and technical content translation</li>
                    <li>Social media strategy and community engagement</li>
                    <li>Blog content creation and whitepaper adaptation</li>
                    <li>Brand voice development and stakeholder alignment</li>
                </ul>`
        },
        background: {
            title: 'Background & Context',
            content: `The health data economy is broken‚Äîcentralized platforms store vast amounts of sensitive information, but the users who generate that data rarely benefit from it. Aloega emerged to change that through a decentralized solution that prioritizes privacy, transparency, and equitable value exchange.
                <br><br>
                My work sat at the intersection of technical communication and digital engagement. With experience in blockchain messaging and social media storytelling, I was brought in to help Aloega clearly communicate its vision across multiple audiences and channels.`
        },
        planning: {
            title: 'Planning & Strategy',
            content: [
                '<strong>Message Repositioning:</strong> Audited and rewrote core messaging across website copy, marketing documents, and community platforms.',
                '<strong>Content Calendar:</strong> Created daily post themes around Web3 health topics and data ownership.',
                '<strong>Audience Research:</strong> Analyzed engagement patterns and feedback across different platforms.',
                '<strong>Brand Voice:</strong> Developed guidelines for consistent messaging across all channels.'
            ],
            images: [
                './assets/project/project2/planning1.png',
                './assets/project/project2/planning2.png'
            ]
        },
        execution: {
            title: 'Execution',
            content: [
                '<strong>Technical Translation:</strong> Rewritten blockchain messaging to boost clarity and relevance for target audiences.',
                '<strong>Social Growth:</strong> Grew social media following by over 1,000+ through educational content.',
                '<strong>Content Creation:</strong> Published blog posts on privacy, data trust, and tokenized health systems.',
                '<strong>Brand Alignment:</strong> Led internal workshops to unify external messaging across touchpoints.'
            ]
        },
        challenges: {
            title: 'Challenges & Solutions',
            content: [
                `<p><strong>Complex Technical Concepts</strong> Blockchain and health data concepts were difficult to communicate.</p>
                <p><strong>üõ† Solution:</strong> Created digestible, story-driven content pillars focused on user benefits.</p>`,
                `<p><strong>Low Early Engagement</strong> Initial posts struggled due to technical jargon.</p>
                <p><strong>üõ† Solution:</strong> Introduced user stories and relatable analogies to humanize the technology.</p>`,
                `<p><strong>Cross-Platform Consistency</strong> Maintaining voice across channels was challenging.</p>
                <p><strong>üõ† Solution:</strong> Developed a comprehensive style guide and content calendar.</p>`
            ]
        },
        outcomes: {
            title: 'Outcomes & Impact',
            content: [
                'üì¢ Grew social media engagement by 200% with new messaging',
                'üåç Attracted 1,000+ new followers through educational, themed content',
                'üí¨ Messaging adopted across pitch decks and internal communication'
            ],
            images: [
                './assets/project/project2/outcome.mp4',
            ]
        },
        reflection: {
            title: 'Reflection',
            content: `Aloega taught me how to write for deep-tech products without losing humanity. I learned to balance educational content with emotional resonance‚Äîand how to adapt tone for diverse audiences across the healthcare x blockchain frontier.
            <br><br>
            This was a project about clarity, trust, and mission-driven storytelling‚Äîexactly the type of work I want to keep doing.`
        },
        images: [
            './assets/project/project2/header1.mp4',
            './assets/project/project2/header2.mp4'
        ],
        visualDesign: {
            title: 'Visual Design',
            images: [
                './assets/project/project2/Visual Design/banner1.png',
                './assets/project/project2/Visual Design/banner2.png',
                './assets/project/project2/Visual Design/banner3.png',
                './assets/project/project2/Visual Design/banner4.png'
            ]
        }
    },
    project3: {
        title: 'NAUSICA NYC',
        subtitle: 'A fashion-forward e-commerce platform blending artistic vision with user-centric design.',
        role: 'UX/UI Designer',
        timeline: '2023',
        tools: 'HTML, CSS, WordPress, Canva, Adobe Creative Suite',
        overview: {
            title: 'Project Overview',
            content: `
                As the lead UX/UI Designer for Nausicaa NYC\'s first full website redesign, I helped a fast-growing fashion brand align its online presence with its artistic vision and business goals. The brand blends fantasy with fashion-forward design, but its original site lacked structure, clarity, and emotional connection.
                <br><br>
                I focused on transforming the site into a platform that balances e-commerce performance with narrative storytelling.
                <br><br>
                <strong>This project spanned:</strong>
                <ul>
                    <li>Complete website redesign and information architecture</li>
                    <li>User research and persona development</li>
                    <li>E-commerce flow optimization</li>
                    <li>Visual design system creation</li>
                </ul>`
        },
        background: {
            title: 'Background & Context',
            content: `Nausicaa NYC, a New York-based designer label, relies exclusively on its website to connect with audiences. Yet despite the brand\'s distinct identity, its previous site failed to communicate its story or support user flow.
                <br><br>
            Leveraging my UX/UI background, I led this redesign using WordPress for implementation, Figma for wireframing, and extensive user research to validate decisions.`
        },
        planning: {
            title: 'Planning & Strategy',
            content: [
                '<strong>User Research:</strong> Conducted 18 interviews to understand shopping behaviors and pain points.',
                '<strong>Persona Development:</strong> Created detailed profiles for key user groups.',
                '<strong>Information Architecture:</strong> Restructured site navigation and content hierarchy.',
                '<strong>Design System:</strong> Developed consistent visual language and component library.'
            ],
            images: [
                './assets/project/project3/planning1.jpg',
                './assets/project/project3/planning2.jpg',
                './assets/project/project3/planning3.jpg',
                './assets/project/project3/planning4.jpg',
                './assets/project/project3/planning5.jpg',
                './assets/project/project3/planning6.jpg'
            ]
        },
        execution: {
            title: 'Execution',
            content: [
                '<strong>WordPress Development:</strong> Rebuilt site structure with clearer categories and navigation.',
                '<strong>UI Enhancement:</strong> Built WordPress layouts reflecting the brand\'s visual tone.',
                '<strong>Testing:</strong> Conducted A/B tests for navigation and conversion optimization.',
                '<strong>Visual Design:</strong> Created cohesive brand identity across all touchpoints.'
            ]
        },
        challenges: {
            title: 'Challenges & Solutions',
            content: [
                `<p><strong>Disconnected User Flow</strong> Navigation between sections was confusing.</p>
                <p><strong>üõ† Solution:</strong> Implemented clear visual hierarchy and intuitive transitions.</p>`,
                `<p><strong>Content Overload</strong> Key pages were dense and hard to scan.</p>
                <p><strong>üõ† Solution:</strong> Reorganized content with improved spacing and typography.</p>`,
                `<p><strong>Mobile Responsiveness</strong> Site performed poorly on mobile devices.</p>
                <p><strong>üõ† Solution:</strong> Developed mobile-first layouts and optimized images.</p>`
            ]
        },
        outcomes: {
            title: 'Outcomes & Impact',
            content: [
                '‚ú® Improved clarity in navigation based on usability feedback',
                'üõçÔ∏è More brand cohesion between visuals and product exploration',
                'üéØ Clearer brand storytelling and product presentation'
            ],
            images: [
                './assets/project/project3/outcome.mp4'
            ]
        },
        reflection: {
            title: 'Reflection',
            content: `This project deepened my understanding of how storytelling and structure impact user engagement in fashion e-commerce. By translating research into design decisions and testing them iteratively, I helped turn Nausicaa NYC\'s website into a platform that\'s both functional and inspiring.`
        },
        images: [
            './assets/project/project3/header1.mp4',
            './assets/project/project3/header2.mp4'
        ],
        visualDesign: {
            title: 'Visual Design',
            images: [
                './assets/project/project3/Visual Design/style-guide.png',
                './assets/project/project3/Visual Design/components.png',
                './assets/project/project3/Visual Design/product-cards.png',
                './assets/project/project3/Visual Design/mobile-views.png'
            ]
        }
    }
};

let currentImageIndex = 0;

function renderContent(container, content) {
    if (Array.isArray(content)) {
        const ul = document.createElement('ul');
        content.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = item;
            ul.appendChild(li);
        });
        container.appendChild(ul);
    } else {
        const p = document.createElement('p');
        p.innerHTML = content;
        container.appendChild(p);
    }
}

function loadProject() {
    // Get project data from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('project');
    
    const project = projectData[projectId];
    if (!project) return;

    // Set title and metadata
    document.querySelector('.project-title').textContent = project.title;
    document.querySelector('.project-subtitle').textContent = project.subtitle;
    
    // Set meta information
    const metaGroups = document.querySelectorAll('.meta-group p');
    metaGroups[0].textContent = project.role;
    metaGroups[1].textContent = project.timeline;
    metaGroups[2].textContent = project.tools;

    // Set up header video
    const videoContainer = document.querySelector('.video-link-container');
    if (videoContainer) {
        // Create video element
        const videoEl = document.createElement('video');
        
        // Set video source based on the project
        if (projectId === 'project1') {
            videoEl.src = './assets/project/project1/Extension1.mp4';
        } else if (projectId === 'project2') {
            videoEl.src = './assets/project/project2/aloega.mp4';
        } else if (projectId === 'project3') {
            videoEl.src = './assets/project/project3/NAUSICAA.mp4';
        }

        videoEl.loop = true;
        videoEl.muted = true; // Keep muted if you want it to autoplay without sound
        videoEl.playsInline = true;
        videoEl.autoplay = true; // Ensure autoplay is set

        // Create overlay with link
        const overlay = document.createElement('a');
        overlay.href = projectId === 'project1' ? 'https://www.froghire.ai' : 
                      projectId === 'project2' ? 'https://www.linkedin.com/company/aloega/' :
                      projectId === 'project3' ? 'https://2023.philemerge.com/a_group5/' : '#';
        overlay.target = '_blank';
        overlay.className = 'video-link-overlay';
        overlay.innerHTML = '<span>View Site</span>';

        videoContainer.appendChild(videoEl);
        videoContainer.appendChild(overlay);
    }

    // Set overview content
    const overviewContent = document.querySelector('.overview-content');
    overviewContent.innerHTML = '';
    renderContent(overviewContent, project.overview.content);
    
    // Load project sections
    const sections = ['background', 'planning', 'execution', 'challenges', 'outcomes', 'reflection'];
    sections.forEach(section => {
        if (project[section]) {
            const sectionEl = document.querySelector(`.project-section.${section}`);
            if (sectionEl) {
                // Set section heading
                sectionEl.querySelector('h2').textContent = project[section].title;

                // Clear old content
                const contentContainer = sectionEl.querySelector('.section-text');
                contentContainer.innerHTML = '';

                // ‚òÖ special‚Äêcase execution: build 2√ó2 grid with image holders
                if (section === 'execution') {
                    const grid = document.createElement('div');
                    grid.className = 'execution-grid';

                    project[section].content.forEach((itemHtml, idx) => {
                        const item = document.createElement('div');
                        item.className = 'execution-item';
                        
                        item.innerHTML = `
                          <div class="execution-item-text">${itemHtml}</div>
                        `;

                        // Add media containers based on project
                        if (projectId === 'project1') {
                            if (idx < 2) {
                                const videoContainer = document.createElement('div');
                                videoContainer.className = 'video-hover-container';
                                
                                const videoEl = document.createElement('video');
                                videoEl.src = `./assets/project/project1/mp4/${idx === 0 ? 'Company Contact' : 'Website'}.mp4`;
                                videoEl.loop = true;
                                videoEl.muted = true;
                                videoEl.playsInline = true;
                                
                                const hoverHint = document.createElement('div');
                                hoverHint.className = 'hover-to-play-hint';
                                hoverHint.innerHTML = '<span>Hover to play</span>';
                                
                                videoContainer.addEventListener('mouseenter', () => {
                                    videoEl.play();
                                    hoverHint.style.opacity = '0';
                                });
                                videoContainer.addEventListener('mouseleave', () => {
                                    videoEl.pause();
                                    hoverHint.style.opacity = '1';
                                });
                                
                                videoContainer.appendChild(videoEl);
                                videoContainer.appendChild(hoverHint);
                                item.appendChild(videoContainer);
                            } else {
                                const imageContainer = document.createElement('div');
                                imageContainer.className = 'video-hover-container';
                                
                                const imgEl = document.createElement('img');
                                imgEl.src = idx === 2 ? './assets/project/project1/sidebar.png' : './assets/project/project1/frog4.gif';
                                imgEl.alt = `Execution ${idx + 1} image`;
                                imgEl.style.objectFit = 'cover';
                                imgEl.style.width = '100%';
                                imgEl.style.height = '100%';
                                
                                imageContainer.appendChild(imgEl);
                                item.appendChild(imageContainer);
                            }
                        } else if (projectId === 'project2') {
                            const imageContainer = document.createElement('div');
                            imageContainer.className = 'video-hover-container';
                            
                            // Create a link wrapper
                            const linkWrapper = document.createElement('a');
                            linkWrapper.target = '_blank';
                            
                            // Set different links for each execution image
                            if (idx === 0) {
                                linkWrapper.href = 'https://linktr.ee/aloega';
                            } else if (idx === 1) {
                                linkWrapper.href = 'https://www.linkedin.com/company/aloega/';
                            } else if (idx === 2) {
                                linkWrapper.href = 'https://aloega.medium.com/round-table-discussion-revolutionizing-healthcare-with-blockchain-technology-8ebd5cbab39e';
                            } else {
                                linkWrapper.href = 'https://www.linkedin.com/posts/aloega_desci-desociety-panel-activity-7193048511666393088-_dAf?utm_source=share&utm_medium=member_desktop&rcm=ACoAAEbDNzsBtOAdQ34VdDYXvlmX9q11seKLdvs';
                            }
                            
                            const imgEl = document.createElement('img');
                            if (idx === 0) {
                                imgEl.src = `./assets/project/project2/execution1.png`;
                            } else if (idx === 1) {
                                imgEl.src = `./assets/project/project2/execution2.png`;
                            } else if (idx === 2) {
                                imgEl.src = `./assets/project/project2/execution3.png`;
                            } else {
                                imgEl.src = `./assets/project/project2/execution4.png`;
                            }
                            imgEl.alt = `Execution ${idx + 1} image`;
                            imgEl.style.objectFit = 'cover';
                            imgEl.style.width = '100%';
                            imgEl.style.height = '100%';
                            imgEl.style.cursor = 'pointer';
                            
                            linkWrapper.appendChild(imgEl);
                            imageContainer.appendChild(linkWrapper);
                            item.appendChild(imageContainer);
                        } else if (projectId === 'project3') {
                            if (idx < 2) {
                                const videoContainer = document.createElement('div');
                                videoContainer.className = 'video-hover-container';
                                
                                const videoEl = document.createElement('video');
                                videoEl.src = `./assets/project/project3/${idx === 0 ? 'execution1' : 'execution2'}.mp4`;
                                videoEl.loop = true;
                                videoEl.muted = true;
                                videoEl.playsInline = true;
                                
                          const hoverHint = document.createElement('div');
                          hoverHint.className = 'hover-to-play-hint';
                          hoverHint.innerHTML = '<span>Hover to play</span>';
                          
                                videoContainer.addEventListener('mouseenter', () => {
                                    videoEl.play();
                            hoverHint.style.opacity = '0';
                          });
                                videoContainer.addEventListener('mouseleave', () => {
                                    videoEl.pause();
                            hoverHint.style.opacity = '1';
                          });
                          
                                videoContainer.appendChild(videoEl);
                                videoContainer.appendChild(hoverHint);
                                item.appendChild(videoContainer);
                        } else {
                                const imageContainer = document.createElement('div');
                                imageContainer.className = 'video-hover-container';
                                
                                const imgEl = document.createElement('img');
                                imgEl.src = `./assets/project/project3/execution${idx + 1}.png`;
                                imgEl.alt = `Execution ${idx + 1} image`;
                                imgEl.style.objectFit = 'cover';
                                imgEl.style.width = '100%';
                                imgEl.style.height = '100%';
                                
                                imageContainer.appendChild(imgEl);
                                item.appendChild(imageContainer);
                            }
                        }
                        
                        grid.appendChild(item);
                    });
                    contentContainer.appendChild(grid);
                } 
                // all other sections: use existing renderContent
                else {
                    renderContent(contentContainer, project[section].content);
                }

                // media gallery for non‚Äêexecution sections
                if (section !== 'execution') {
                    const imgs = (project[section].images && project[section].images.length > 0)
                        ? project[section].images
                        : ['https://via.placeholder.com/600x400?text=Coming+Soon'];
                    setupSectionMedia(sectionEl, imgs);
                }
            }
        }
    });

    // Set up visual design gallery
    if (project.visualDesign && project.visualDesign.images) {
        setupVisualDesignGallery(project.visualDesign.images);
    }
}

function setupSectionMedia(sectionEl, images) {
    const mediaContainer = sectionEl.querySelector('.section-media');
    if (!mediaContainer) return;
    
    // Clear existing content
    mediaContainer.innerHTML = '';
    
    // Create controls container
    const controls = document.createElement('div');
    controls.className = 'section-media-controls';
    
    // Add images and dots
    images.forEach((src, i) => {
        let mediaEl;
        
        if (/\.(mp4|webm)$/i.test(src)) {
            // Create container for video and hover effect
            const container = document.createElement('div');
            container.className = 'video-hover-container';
            
            // Create video element
            const videoEl = document.createElement('video');
            videoEl.src = src;
            videoEl.loop = true;
            videoEl.muted = true;
            videoEl.playsInline = true;
            
            // Add hover indicator
            const hoverHint = document.createElement('div');
            hoverHint.className = 'hover-to-play-hint';
            hoverHint.innerHTML = '<span>Hover to play</span>';
            
            // Add hover events
            container.addEventListener('mouseenter', () => {
                videoEl.play();
                hoverHint.style.opacity = '0';
            });
            container.addEventListener('mouseleave', () => {
                videoEl.pause();
                hoverHint.style.opacity = '1';
            });
            
            container.appendChild(videoEl);
            container.appendChild(hoverHint);
            mediaEl = container;
        } else {
            mediaEl = document.createElement('img');
            mediaEl.src = src;
            mediaEl.alt = `Section image ${i + 1}`;
        }
        
        mediaEl.classList.toggle('active', i === 0);
        mediaContainer.appendChild(mediaEl);
        
        // Create and add dot
        const dot = document.createElement('button');
        dot.className = `section-media-dot${i === 0 ? ' active' : ''}`;
        dot.setAttribute('aria-label', `View media ${i + 1}`);
        dot.addEventListener('click', () => showSectionImage(mediaContainer, i));
        controls.appendChild(dot);
    });
    
    if (images.length > 1) {
        mediaContainer.appendChild(controls);
    }
}

function showSectionImage(container, index) {
    // Pause any playing videos
    container.querySelectorAll('video').forEach(video => {
        video.pause();
    });
    
    // Remove old active classes
    const prevMedia = container.querySelector('.active');
    if (prevMedia) prevMedia.classList.remove('active');

    const prevDot = container.querySelector('.section-media-dot.active');
    if (prevDot) prevDot.classList.remove('active');

    // Add new active classes
    const mediaElements = container.querySelectorAll('.video-hover-container, img');
    const dots = container.querySelectorAll('.section-media-dot');
    
    if (mediaElements[index]) mediaElements[index].classList.add('active');
    if (dots[index]) dots[index].classList.add('active');
}

function updateActiveNavItem() {
    const sections = document.querySelectorAll('.project-section');
    const navItems = document.querySelectorAll('.section-nav-item');
    
    // Get the current scroll position
    const scrollPosition = window.scrollY + window.innerHeight / 3; // Adjust trigger point

    // Find the current section
    sections.forEach((section, index) => {
        const sectionTop = section.offsetTop;
        const sectionBottom = sectionTop + section.offsetHeight;
        
        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
            // Remove active class from all sections and nav items
            sections.forEach(s => s.classList.remove('active'));
            navItems.forEach(item => item.classList.remove('active'));
            
            // Add active class to current section and nav item
            section.classList.add('active');
            navItems[index].classList.add('active');
        }
    });
}

// Add smooth scrolling to nav items
document.querySelectorAll('.section-nav-item').forEach(item => {
    item.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = item.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        
        if (targetSection) {
            window.scrollTo({
                top: targetSection.offsetTop - 100, // Offset for fixed header
                behavior: 'smooth'
            });
        }
    });
});

// Update active nav item on scroll
window.addEventListener('scroll', updateActiveNavItem);

// Initial load
document.addEventListener('DOMContentLoaded', () => {
    loadProject();
    setTimeout(updateActiveNavItem, 100);

    // Back‚Äëto‚Äëtop functionality (now inside DOMContentLoaded)
    const backBtn = document.querySelector('.back-to-top');
    if (backBtn) {
      backBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    document.addEventListener('click', function(e) {
      // look for clicks on any .section-media-dot (or its children)
      const dot = e.target.closest('.section-media-dot');
      if (!dot) return;

      const container = dot.closest('.section-media');
      if (!container) return;

      // find the index of that dot
      const allDots = Array.from(container.querySelectorAll('.section-media-dot'));
      const idx     = allDots.indexOf(dot);
      if (idx === -1) return;

      showSectionImage(container, idx);
    });
});

function setupVisualDesignGallery(images) {
    const galleryContainer = document.querySelector('.design-gallery');
    if (!galleryContainer) return;

    galleryContainer.innerHTML = '';

    // Get project ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('project');

    let imageDetails = [];

    // Set image details based on project
    if (projectId === 'project1') {
        imageDetails = [
            { src: './assets/project/project1/Visual Design/color.png', title: 'Color Palette' },
            { src: './assets/project/project1/Visual Design/Newsletter Banner.png', title: 'Newsletter Banner' },
            { src: './assets/project/project1/Visual Design/Monthly Keywords Poster.png', title: 'Monthly Keywords Poster' },
            { src: './assets/project/project1/Visual Design/2 Step Guide.png', title: '2-Step Guide' },
            { src: './assets/project/project1/Visual Design/Small promo tile.png', title: 'Promotional Tile' },
            { src: './assets/project/project1/Visual Design/FrogHire Meeting Background V2.png', title: 'Meeting Background' },
            { src: './assets/project/project1/Visual Design/BusinessCard Back.png', title: 'Business Card Design Back' },
            { src: './assets/project/project1/Visual Design/BusinessCard Front.png', title: 'Business Card Design Front' }
        ];
    } else if (projectId === 'project2') {
        imageDetails = [
            { src: './assets/project/project2/Visual Design/banner1.png', title: 'Aloega Coins' },
            { src: './assets/project/project2/Visual Design/banner2.png', title: 'Aloega: Revolutionizing Data Trusts' },
            { src: './assets/project/project2/Visual Design/banner3.png', title: 'Aloega: The Future of Healthcare' },
            { src: './assets/project/project2/Visual Design/banner4.png', title: 'Aloega Banner' }
        ];
    } else if (projectId === 'project3') {
        imageDetails = [
            { src: './assets/project/project3/Visual Design/color.png', title: 'Color Palette' },
            { src: './assets/project/project3/Visual Design/Banner.png', title: 'Banner' },
            { src: './assets/project/project3/Visual Design/Home.png', title: 'Homepage Design' },
            { src: './assets/project/project3/Visual Design/Journal.png', title: 'Journal Page' },
            { src: './assets/project/project3/Visual Design/Lookbook1.png', title: 'Lookbook Gallery' },
            { src: './assets/project/project3/Visual Design/Lookbook2.png', title: 'Lookbook Gallery' }
        ];
    }

    imageDetails.forEach(({ src, title }) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'design-gallery-item';
        galleryItem.style.position = 'relative';
        galleryItem.style.overflow = 'hidden';
        galleryItem.style.borderRadius = '12px';
        galleryItem.style.backgroundColor = 'var(--surface-2)';
        galleryItem.style.cursor = 'pointer';
        galleryItem.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
        
        const img = document.createElement('img');
        img.src = src;
        img.alt = title;
        img.style.width = '100%';
        img.style.height = 'auto';
        img.style.objectFit = 'contain';
        img.style.display = 'block';
        img.style.backgroundColor = 'white';
        img.style.padding = '1rem';

        const titleOverlay = document.createElement('div');
        titleOverlay.className = 'title-overlay';
        titleOverlay.textContent = title;
        titleOverlay.style.position = 'absolute';
        titleOverlay.style.bottom = '0';
        titleOverlay.style.left = '0';
        titleOverlay.style.right = '0';
        titleOverlay.style.background = 'rgba(0, 0, 0, 0.7)';
        titleOverlay.style.color = 'white';
        titleOverlay.style.padding = '1rem';
        titleOverlay.style.opacity = '0';
        titleOverlay.style.transition = 'opacity 0.3s ease';

        galleryItem.addEventListener('mouseenter', () => {
            galleryItem.style.transform = 'translateY(-5px)';
            galleryItem.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
            titleOverlay.style.opacity = '1';
        });

        galleryItem.addEventListener('mouseleave', () => {
            galleryItem.style.transform = 'translateY(0)';
            galleryItem.style.boxShadow = 'none';
            titleOverlay.style.opacity = '0';
        });

        galleryItem.addEventListener('click', () => {
            openImageModal(src, title);
        });

        img.addEventListener('load', () => {
            galleryItem.classList.add('loaded');
        });

        img.addEventListener('error', () => {
            console.error(`Failed to load image: ${src}`);
            galleryItem.classList.add('error');
        });

        galleryItem.appendChild(img);
        galleryItem.appendChild(titleOverlay);
        galleryContainer.appendChild(galleryItem);
    });
}

function openImageModal(src, title) {
    const modal = document.createElement('div');
    modal.className = 'image-modal';
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '100%';
    modal.style.height = '100%';
    modal.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
    modal.style.display = 'flex';
    modal.style.flexDirection = 'column';
    modal.style.alignItems = 'center';
    modal.style.justifyContent = 'center';
    modal.style.zIndex = '1000';
    modal.style.padding = '2rem';

    const modalImg = document.createElement('img');
    modalImg.src = src;
    modalImg.alt = title;
    modalImg.style.maxWidth = '90%';
    modalImg.style.maxHeight = '80vh';
    modalImg.style.objectFit = 'contain';
    modalImg.style.marginBottom = '1rem';

    const modalTitle = document.createElement('h3');
    modalTitle.textContent = title;
    modalTitle.style.color = 'white';
    modalTitle.style.marginTop = '1rem';

    const closeButton = document.createElement('button');
    closeButton.textContent = '√ó';
    closeButton.style.position = 'absolute';
    closeButton.style.top = '1rem';
    closeButton.style.right = '1rem';
    closeButton.style.background = 'none';
    closeButton.style.border = 'none';
    closeButton.style.color = 'white';
    closeButton.style.fontSize = '2rem';
    closeButton.style.cursor = 'pointer';

    modal.appendChild(modalImg);
    modal.appendChild(modalTitle);
    modal.appendChild(closeButton);

    const closeModal = () => {
        document.body.removeChild(modal);
        document.removeEventListener('keydown', handleKeyDown);
    };

    const handleKeyDown = (e) => {
        if (e.key === 'Escape') {
            closeModal();
        }
    };

    closeButton.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });
    document.addEventListener('keydown', handleKeyDown);

    document.body.appendChild(modal);
} 